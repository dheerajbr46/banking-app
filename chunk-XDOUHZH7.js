import{b as G}from"./chunk-AYSLDV5U.js";import{a as H}from"./chunk-AFG7AMLP.js";import"./chunk-IKQLUHYN.js";import{r as w}from"./chunk-JAQJABC2.js";import{$ as I,Bb as B,Cb as c,Db as m,Eb as u,Fb as M,Pa as a,W as f,Xa as A,Xb as P,ab as d,da as S,db as l,ea as x,gb as i,hb as o,jb as F,jc as O,kb as k,kc as j,lb as N,lc as R,ma as D,mb as h,mc as V,na as E,nb as _,nc as U,oc as L,qc as q,rc as z,s as y,t as C,ub as r,vb as p,wb as $,xb as v}from"./chunk-2V24LDMU.js";var W=(t,n)=>({"text-emerald-500":t,"text-rose-500":n});function X(t,n){if(t&1){let e=N();i(0,"button",8),h("click",function(){let T=D(e).$implicit,Q=_(2);return E(Q.changeAccountFilter(T.id))}),r(1),o()}if(t&2){let e=n.$implicit,s=_(2);l("ngClass",s.selectedAccountId()===e.id?"border-midnight bg-midnight text-white":"border-slate-200 text-slate-600 hover:border-midnight hover:text-midnight"),a(),$(" ",e.name," ")}}function Y(t,n){if(t&1&&(F(0),d(1,X,2,2,"button",15),k()),t&2){let e=n.ngIf;a(),l("ngForOf",e)}}function Z(t,n){if(t&1&&(i(0,"div",16)(1,"div",17)(2,"span"),r(3,"Inflows: "),i(4,"strong",18),r(5),c(6,"currency"),o()(),i(7,"span"),r(8,"Outflows: "),i(9,"strong",19),r(10),c(11,"currency"),o()(),i(12,"span"),r(13,"Net: "),i(14,"strong",20),r(15),c(16,"currency"),o()()()()),t&2){let e=n.ngIf;a(5),p(u(6,3,e.inflows,"USD")),a(5),p(u(11,6,e.outflows,"USD")),a(5),p(u(16,9,e.inflows-e.outflows,"USD"))}}function ee(t,n){if(t&1&&(i(0,"article",24)(1,"div")(2,"p",25),r(3),o(),i(4,"p",26),r(5),c(6,"date"),o()(),i(7,"div",27)(8,"p",28),r(9),c(10,"currency"),o(),i(11,"p",26),r(12),c(13,"titlecase"),o()()()),t&2){let e=n.$implicit;a(3),p(e.description),a(2),v("",e.category," \xB7 ",u(6,7,e.date,"medium"),""),a(3),l("ngClass",B(17,W,e.direction==="credit",e.direction==="debit")),a(),v(" ",e.direction==="credit"?"+":"-","",M(10,10,e.amount,e.currency,!1,"1.2-2")," "),a(3),p(m(13,15,e.status))}}function te(t,n){t&1&&(i(0,"p",29),r(1," No transactions found for this filter. "),o())}function ne(t,n){if(t&1&&(i(0,"div",21),d(1,ee,14,20,"article",22)(2,te,2,0,"p",23),o()),t&2){let e=n.ngIf;a(),l("ngForOf",e),a(),l("ngIf",!e.length)}}var g=class t{bankData=I(H);accounts$=this.bankData.getAccounts();transactions$=this.bankData.getTransactions();selectedAccountId=A(null);filteredTransactions$=C([this.transactions$,G(this.selectedAccountId)]).pipe(y(([n,e])=>this.sortTransactions(e?n.filter(s=>s.accountId===e):n)));totalForSelection$=this.filteredTransactions$.pipe(y(n=>n.reduce((e,s)=>(s.direction==="credit"?e.inflows+=s.amount:e.outflows+=s.amount,e),{inflows:0,outflows:0})));selectedAccountLabel=P(()=>this.selectedAccountId());changeAccountFilter(n){this.selectedAccountId.set(n)}sortTransactions(n){return[...n].sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-transactions"]],decls:28,vars:10,consts:[[1,"bg-white"],[1,"mx-auto","max-w-6xl","px-6","py-20"],[1,"rounded-3xl","border","border-slate-200","bg-white/95","p-10","shadow-sm"],[1,"text-3xl","font-semibold","text-midnight"],[1,"mt-4","text-slate-500"],[1,"mt-8","grid","gap-6","lg:grid-cols-[1.6fr,1fr]"],[1,"space-y-6"],[1,"flex","flex-wrap","items-center","gap-2"],["type","button",1,"rounded-full","border","px-4","py-2","text-sm","transition",3,"click","ngClass"],[4,"ngIf"],["class","rounded-2xl border border-slate-200 bg-mist px-6 py-4 text-sm text-slate-600",4,"ngIf"],["class","space-y-3",4,"ngIf"],[1,"rounded-2xl","border","border-slate-200","bg-mist/70","p-6","text-sm","text-slate-600"],[1,"text-lg","font-semibold","text-midnight"],[1,"mt-3","space-y-2"],["type","button","class","rounded-full border px-4 py-2 text-sm transition",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"rounded-2xl","border","border-slate-200","bg-mist","px-6","py-4","text-sm","text-slate-600"],[1,"flex","flex-wrap","items-center","gap-4"],[1,"text-emerald-600"],[1,"text-rose-500"],[1,"text-midnight"],[1,"space-y-3"],["class","flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-5 py-4 text-sm",4,"ngFor","ngForOf"],["class","rounded-2xl border border-slate-200 bg-white px-5 py-4 text-sm text-slate-500",4,"ngIf"],[1,"flex","items-center","justify-between","rounded-2xl","border","border-slate-200","bg-white","px-5","py-4","text-sm"],[1,"font-medium","text-midnight"],[1,"text-xs","text-slate-400"],[1,"text-right"],[1,"text-base","font-semibold",3,"ngClass"],[1,"rounded-2xl","border","border-slate-200","bg-white","px-5","py-4","text-sm","text-slate-500"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"Transactions stream"),o(),i(5,"p",4),r(6," Filter the live ledger by account and inspect inflows/outflows. Powered entirely by the Angular in-memory web API. "),o(),i(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),h("click",function(){return s.changeAccountFilter(null)}),r(11," All accounts "),o(),d(12,Y,2,1,"ng-container",9),c(13,"async"),o(),d(14,Z,17,12,"div",10),c(15,"async"),d(16,ne,3,2,"div",11),c(17,"async"),o(),i(18,"aside",12)(19,"h2",13),r(20,"Next enhancements"),o(),i(21,"ul",14)(22,"li"),r(23,"\u{1F9FE} Add export to CSV using the filtered dataset."),o(),i(24,"li"),r(25,"\u{1F50D} Drop in full-text search over merchant, memo, or category."),o(),i(26,"li"),r(27,"\u26A1 Swap the mock API with real services and keep this template."),o()()()()()()()),e&2&&(a(10),l("ngClass",s.selectedAccountId()===null?"border-midnight bg-midnight text-white":"border-slate-200 text-slate-600 hover:border-midnight hover:text-midnight"),a(2),l("ngIf",m(13,4,s.accounts$)),a(2),l("ngIf",m(15,6,s.totalForSelection$)),a(2),l("ngIf",m(17,8,s.filteredTransactions$)))},dependencies:[O,j,R,V,U,q,L],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var ie=[{path:"",component:g}],b=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=x({type:t});static \u0275inj=f({imports:[w.forChild(ie),w]})};var K=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=x({type:t});static \u0275inj=f({imports:[z,b]})};export{K as TransactionsModule};
