import{b as W}from"./chunk-JKKZI7MO.js";import{a as X}from"./chunk-KDE6S6UL.js";import"./chunk-IKQLUHYN.js";import{r as N}from"./chunk-Z67HQNM4.js";import{$ as B,Ab as O,Eb as R,Fb as d,Gb as g,Hb as x,Ib as V,Jb as w,Ra as a,W as b,Za as P,_b as U,cb as c,da as M,ea as h,eb as F,fb as l,ib as i,jb as o,kb as f,lb as y,ma as E,mb as v,mc as L,na as k,nb as D,nc as q,ob as A,oc as z,pb as p,pc as G,qc as H,rc as J,s as I,t as $,tc as K,uc as Q,wb as C,xb as r,yb as m,zb as j}from"./chunk-7G2ECGGJ.js";var te=(t,n)=>({"text-emerald-500":t,"text-rose-500":n});function ne(t,n){if(t&1){let e=D();i(0,"button",11),A("click",function(){let u=E(e).$implicit,_=p(2);return k(_.changeAccountFilter(u.id))}),r(1),o()}if(t&2){let e=n.$implicit,s=p(2);l("ngClass",s.selectedAccountId()===e.id?"border-midnight bg-midnight text-white":"border-slate-200 text-slate-600 hover:border-midnight hover:text-midnight"),F("aria-pressed",s.selectedAccountId()===e.id),a(),j(" ",e.name," ")}}function ie(t,n){if(t&1&&(y(0),c(1,ne,2,3,"button",16),v()),t&2){let e=n.ngIf;a(),l("ngForOf",e)}}function oe(t,n){t&1&&f(0,"span",19)}function ae(t,n){if(t&1&&(i(0,"div",17),c(1,oe,1,0,"span",18),o()),t&2){let e=p();a(),l("ngForOf",e.accountChipSkeletons)}}function re(t,n){if(t&1&&(y(0),i(1,"div",20)(2,"div",21)(3,"span"),r(4,"Inflows: "),i(5,"strong",22),r(6),d(7,"currency"),o()(),i(8,"span"),r(9,"Outflows: "),i(10,"strong",23),r(11),d(12,"currency"),o()(),i(13,"span"),r(14,"Net: "),i(15,"strong",24),r(16),d(17,"currency"),o()()()(),v()),t&2){let e=n.ngIf;a(6),m(x(7,3,e.inflows,"USD")),a(5),m(x(12,6,e.outflows,"USD")),a(5),m(x(17,9,e.inflows-e.outflows,"USD"))}}function se(t,n){t&1&&f(0,"span",27)}function le(t,n){if(t&1&&(i(0,"div",25)(1,"div",21),c(2,se,1,0,"span",26),o()()),t&2){let e=p();a(2),l("ngForOf",e.totalSkeletons)}}function ce(t,n){if(t&1&&(i(0,"article",31)(1,"div")(2,"p",32),r(3),o(),i(4,"p",33),r(5),d(6,"date"),o()(),i(7,"div",34)(8,"p",35),r(9),d(10,"currency"),o(),i(11,"p",33),r(12),d(13,"titlecase"),o()()()),t&2){let e=n.$implicit;a(3),m(e.description),a(2),O("",e.category," \xB7 ",x(6,7,e.date,"medium")," "),a(3),l("ngClass",R(17,te,e.direction==="credit",e.direction==="debit")),a(),O(" ",e.direction==="credit"?"+":"-","",V(10,10,e.amount,e.currency,!1,"1.2-2")," "),a(3),m(g(13,15,e.status))}}function de(t,n){t&1&&(i(0,"p",36),r(1," No transactions found for this filter. "),o())}function pe(t,n){if(t&1&&(y(0),i(1,"div",28),c(2,ce,14,20,"article",29)(3,de,2,0,"p",30),o(),v()),t&2){let e=n.ngIf;a(2),l("ngForOf",e),a(),l("ngIf",!e.length)}}function me(t,n){t&1&&(i(0,"article",31)(1,"div",38),f(2,"div",39)(3,"div",40),o(),i(4,"div",41),f(5,"div",42)(6,"div",43),o()())}function ue(t,n){if(t&1&&(i(0,"div",37),c(1,me,7,0,"article",29),o()),t&2){let e=p();a(),l("ngForOf",e.transactionSkeletons)}}var S=class t{bankData=B(X);accounts$=this.bankData.getAccounts();transactions$=this.bankData.getTransactions();selectedAccountId=P(null);filteredTransactions$=$([this.transactions$,W(this.selectedAccountId)]).pipe(I(([n,e])=>this.sortTransactions(e?n.filter(s=>s.accountId===e):n)));totalForSelection$=this.filteredTransactions$.pipe(I(n=>n.reduce((e,s)=>(s.direction==="credit"?e.inflows+=s.amount:e.outflows+=s.amount,e),{inflows:0,outflows:0})));selectedAccountLabel=U(()=>this.selectedAccountId());accountChipSkeletons=Array.from({length:3});transactionSkeletons=Array.from({length:6});totalSkeletons=Array.from({length:3});changeAccountFilter(n){this.selectedAccountId.set(n)}sortTransactions(n){return[...n].sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-transactions"]],decls:34,vars:14,consts:[["accountChipsSkeleton",""],["totalSkeleton",""],["transactionsSkeleton",""],[1,"bg-white"],[1,"mx-auto","max-w-6xl","px-6","py-20"],[1,"rounded-3xl","border","border-slate-200","bg-white/95","p-10","shadow-sm"],[1,"text-3xl","font-semibold","text-midnight"],[1,"mt-4","text-slate-500"],[1,"mt-8","grid","gap-6","lg:grid-cols-[1.6fr,1fr]"],[1,"space-y-6"],[1,"flex","flex-wrap","items-center","gap-2"],["type","button",1,"rounded-full","border","px-4","py-2","text-sm","transition","focus:outline-none","focus-visible:ring-2","focus-visible:ring-midnight/50",3,"click","ngClass"],[4,"ngIf","ngIfElse"],[1,"rounded-2xl","border","border-slate-200","bg-mist/70","p-6","text-sm","text-slate-600"],[1,"text-lg","font-semibold","text-midnight"],[1,"mt-3","space-y-2"],["type","button","class","rounded-full border px-4 py-2 text-sm transition focus:outline-none focus-visible:ring-2 focus-visible:ring-midnight/50",3,"ngClass","click",4,"ngFor","ngForOf"],["aria-hidden","true",1,"flex","flex-wrap","items-center","gap-2","animate-pulse"],["class","h-9 w-24 rounded-full bg-slate-200",4,"ngFor","ngForOf"],[1,"h-9","w-24","rounded-full","bg-slate-200"],["role","status","aria-live","polite",1,"rounded-2xl","border","border-slate-200","bg-mist","px-6","py-4","text-sm","text-slate-600"],[1,"flex","flex-wrap","items-center","gap-4"],[1,"text-emerald-600"],[1,"text-rose-500"],[1,"text-midnight"],["aria-hidden","true","aria-busy","true",1,"rounded-2xl","border","border-slate-200","bg-mist","px-6","py-4","animate-pulse"],["class","h-4 w-28 rounded bg-slate-200",4,"ngFor","ngForOf"],[1,"h-4","w-28","rounded","bg-slate-200"],[1,"space-y-3"],["class","flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-5 py-4 text-sm",4,"ngFor","ngForOf"],["class","rounded-2xl border border-slate-200 bg-white px-5 py-4 text-sm text-slate-500",4,"ngIf"],[1,"flex","items-center","justify-between","rounded-2xl","border","border-slate-200","bg-white","px-5","py-4","text-sm"],[1,"font-medium","text-midnight"],[1,"text-xs","text-slate-400"],[1,"text-right"],[1,"text-base","font-semibold",3,"ngClass"],[1,"rounded-2xl","border","border-slate-200","bg-white","px-5","py-4","text-sm","text-slate-500"],["aria-hidden","true",1,"space-y-3","animate-pulse"],[1,"space-y-2"],[1,"h-4","w-48","rounded","bg-slate-200"],[1,"h-3","w-32","rounded","bg-slate-100"],[1,"space-y-2","text-right"],[1,"h-5","w-20","rounded","bg-slate-200","ml-auto"],[1,"h-3","w-16","rounded","bg-slate-100","ml-auto"]],template:function(e,s){if(e&1){let u=D();i(0,"section",3)(1,"div",4)(2,"div",5)(3,"h1",6),r(4,"Transactions stream"),o(),i(5,"p",7),r(6," Filter the live ledger by account and inspect inflows/outflows. Powered entirely by the Angular in-memory web API. "),o(),i(7,"div",8)(8,"div",9)(9,"div",10)(10,"button",11),A("click",function(){return E(u),k(s.changeAccountFilter(null))}),r(11," All accounts "),o(),c(12,ie,2,1,"ng-container",12),d(13,"async"),o(),c(14,ae,2,1,"ng-template",null,0,w)(16,re,18,12,"ng-container",12),d(17,"async"),c(18,le,3,1,"ng-template",null,1,w)(20,pe,4,2,"ng-container",12),d(21,"async"),c(22,ue,2,1,"ng-template",null,2,w),o(),i(24,"aside",13)(25,"h2",14),r(26,"Next enhancements"),o(),i(27,"ul",15)(28,"li"),r(29,"\u{1F9FE} Add export to CSV using the filtered dataset."),o(),i(30,"li"),r(31,"\u{1F50D} Drop in full-text search over merchant, memo, or category."),o(),i(32,"li"),r(33,"\u26A1 Swap the mock API with real services and keep this template."),o()()()()()()()}if(e&2){let u=C(15),_=C(19),ee=C(23);a(10),l("ngClass",s.selectedAccountId()===null?"border-midnight bg-midnight text-white":"border-slate-200 text-slate-600 hover:border-midnight hover:text-midnight"),F("aria-pressed",s.selectedAccountId()===null),a(2),l("ngIf",g(13,8,s.accounts$))("ngIfElse",u),a(4),l("ngIf",g(17,10,s.totalForSelection$))("ngIfElse",_),a(4),l("ngIf",g(21,12,s.filteredTransactions$))("ngIfElse",ee)}},dependencies:[L,q,z,G,H,K,J],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var fe=[{path:"",component:S}],T=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=b({imports:[N.forChild(fe),N]})};var Z=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=b({imports:[Q,T]})};export{Z as TransactionsModule};
