import{b as Y,c as x,d as Z,e as ee,f as te,g as ie,h as ne,i as re,m as ae,n as oe,o as le}from"./chunk-7T5PGW3B.js";import{a as F}from"./chunk-CNJIAFHZ.js";import{a as se}from"./chunk-TAB4Y5YQ.js";import{q as X,s as D}from"./chunk-O2OYFZXD.js";import{A as M,Ab as O,Bb as r,Cb as m,Db as A,J as R,Jb as p,Kb as B,Lb as b,Nb as z,P as $,S as j,Ua as o,Z as v,ab as f,ca as _,fb as u,ga as P,ha as h,ib as c,lb as i,mb as n,nb as C,o as T,ob as U,pa as y,pb as q,qa as S,qb as N,rb as E,rc as L,s as V,sb as d,sc as H,tc as J,ua as G,vb as g,vc as K,xc as Q,yc as W}from"./chunk-DEEXOUVC.js";function me(t,a){if(t&1&&(i(0,"p",12),r(1),n()),t&2){let e=d();o(),A(" ",e.saveSuccess()," ")}}function pe(t,a){if(t&1&&(i(0,"p",13),r(1),n()),t&2){let e=d();o(),A(" ",e.saveError()," ")}}function ue(t,a){if(t&1&&(i(0,"div",14)(1,"span"),r(2,"Total accounts: "),i(3,"strong",15),r(4),n()(),i(5,"span"),r(6,"Combined balance: "),i(7,"strong",15),r(8),p(9,"currency"),n()()()),t&2){let e=a.ngIf;o(4),m(e.count),o(4),m(b(9,2,e.totalBalance,"USD"))}}function xe(t,a){t&1&&(U(0),r(1,"Save"),q())}function fe(t,a){if(t&1){let e=N();i(0,"form",33),E("ngSubmit",function(){y(e);let s=d(3);return S(s.submitAccount())}),i(1,"div",34)(2,"label",35),r(3,"Account name"),n(),C(4,"input",36),n(),i(5,"div",34)(6,"label",35),r(7,"Available balance"),n(),C(8,"input",37),n(),i(9,"div",38)(10,"button",39),u(11,xe,2,0,"ng-container",40),n(),i(12,"button",41),E("click",function(){y(e);let s=d(3);return S(s.cancelEditing())}),r(13,"Cancel"),n()()()}if(t&2){let e=d().$implicit,l=O(37),s=d(2);c("formGroup",s.accountForm),o(2),g("for","accountName-",e.id,""),o(2),g("id","accountName-",e.id,""),o(2),g("for","accountAvailable-",e.id,""),o(2),g("id","accountAvailable-",e.id,""),o(2),c("disabled",s.accountForm.invalid||s.isSaving()),o(),c("ngIf",!s.isSaving())("ngIfElse",l)}}function ge(t,a){t&1&&(i(0,"span",42),C(1,"span",43),r(2," Saving\u2026 "),n())}function be(t,a){if(t&1){let e=N();i(0,"article",18)(1,"div",19)(2,"div",20)(3,"span",21),r(4),n(),i(5,"div")(6,"h2",22),r(7),n(),i(8,"p",23),r(9),n()()(),i(10,"span",24),r(11),n()(),i(12,"div",25)(13,"p",19)(14,"span"),r(15,"Balance"),n(),i(16,"span",22),r(17),p(18,"currency"),n()(),i(19,"p",19)(20,"span"),r(21,"Available"),n(),i(22,"span",26),r(23),p(24,"currency"),n()(),i(25,"p",27),r(26),p(27,"date"),n()(),i(28,"div",28)(29,"a",29),r(30," View transactions "),i(31,"span",30),r(32,"\u2192"),n()(),i(33,"button",31),E("click",function(){let s=y(e).$implicit,k=d(2);return S(k.startEditing(s))}),r(34," Adjust details "),n(),u(35,fe,14,12,"form",32)(36,ge,3,0,"ng-template",null,0,z),n()()}if(t&2){let e=a.$implicit,l=d(2);o(4),m(e.icon||"\u{1F3E6}"),o(3),m(e.name),o(2),m(e.type),o(2),m(e.accountNumber),o(6),m(b(18,8,e.balance,e.currency)),o(6),m(b(24,11,e.availableBalance,e.currency)),o(3),A("Updated ",b(27,14,e.lastUpdated,"short"),""),o(9),c("ngIf",l.editingAccountId()===e.id)}}function ve(t,a){if(t&1&&(i(0,"div",16),u(1,be,38,17,"article",17),n()),t&2){let e=a.ngIf;o(),c("ngForOf",e)}}var I=class t{bankData=_(se);fb=_(oe);destroyRef=_(G);refreshTrigger$=M(T(void 0),this.bankData.refresh$);accounts$=this.refreshTrigger$.pipe(j(()=>this.bankData.getAccounts()),$({bufferSize:1,refCount:!0}));totals$=this.accounts$.pipe(V(a=>({count:a.length,totalBalance:a.reduce((e,l)=>e+l.balance,0)})));editingAccountId=f(null);saveSuccess=f(null);saveError=f(null);isSaving=f(!1);accountForm=this.fb.nonNullable.group({id:["",x.required],name:["",[x.required,x.maxLength(60)]],availableBalance:[0,[x.required,x.min(0)]]});constructor(){this.bankData.refresh$.pipe(F(this.destroyRef)).subscribe(()=>{this.editingAccountId.set(null)})}startEditing(a){this.accountForm.setValue({id:a.id,name:a.name,availableBalance:a.availableBalance}),this.saveSuccess.set(null),this.saveError.set(null),this.editingAccountId.set(a.id)}cancelEditing(){this.editingAccountId.set(null)}submitAccount(){if(this.accountForm.invalid){this.accountForm.markAllAsTouched();return}let{id:a,name:e,availableBalance:l}=this.accountForm.getRawValue();this.isSaving.set(!0),this.saveSuccess.set(null),this.saveError.set(null),this.bankData.updateAccount({id:a,name:e,availableBalance:Number(l)}).pipe(F(this.destroyRef),R(()=>this.isSaving.set(!1))).subscribe({next:s=>{this.saveSuccess.set(`${s.name} updated.`),this.editingAccountId.set(null)},error:s=>{let k=s instanceof Error?s.message:"Unable to update account.";this.saveError.set(k)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-accounts"]],decls:16,vars:8,consts:[["savingAccount",""],[1,"bg-white"],[1,"mx-auto","max-w-6xl","px-6","py-20"],[1,"space-y-12"],[1,"space-y-4"],[1,"text-3xl","font-semibold","text-midnight"],[1,"text-slate-500"],["class","rounded-3xl border border-emerald-100 bg-emerald-50 px-4 py-3 text-sm text-emerald-600",4,"ngIf"],["class","rounded-3xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",4,"ngIf"],["class","flex flex-wrap items-center gap-4 rounded-3xl border border-slate-200 bg-mist px-6 py-4 text-sm text-slate-600",4,"ngIf"],["class","grid gap-6 md:grid-cols-2 xl:grid-cols-3",4,"ngIf"],[1,"rounded-3xl","border","border-dashed","border-slate-200","p-8","text-sm","text-slate-500"],[1,"rounded-3xl","border","border-emerald-100","bg-emerald-50","px-4","py-3","text-sm","text-emerald-600"],[1,"rounded-3xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"],[1,"flex","flex-wrap","items-center","gap-4","rounded-3xl","border","border-slate-200","bg-mist","px-6","py-4","text-sm","text-slate-600"],[1,"text-midnight"],[1,"grid","gap-6","md:grid-cols-2","xl:grid-cols-3"],["class","flex h-full flex-col rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",4,"ngFor","ngForOf"],[1,"flex","h-full","flex-col","rounded-3xl","border","border-slate-200","bg-white","p-6","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"text-2xl"],[1,"text-lg","font-semibold","text-midnight"],[1,"text-xs","uppercase","tracking-wide","text-slate-400"],[1,"rounded-full","bg-mist","px-3","py-1","text-xs","text-slate-500"],[1,"mt-6","space-y-2","text-sm","text-slate-500"],[1,"font-medium","text-emerald-500"],[1,"text-xs","text-slate-400"],[1,"mt-auto","pt-6"],["routerLink","/transactions",1,"inline-flex","items-center","gap-2","text-sm","font-medium","text-midnight","hover:underline"],["aria-hidden","true"],["type","button",1,"mt-4","inline-flex","w-full","items-center","justify-center","rounded-full","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-midnight","transition","hover:border-midnight","hover:text-midnight","focus:outline-none","focus-visible:ring-2","focus-visible:ring-midnight/50",3,"click"],["class","mt-4 space-y-3 rounded-2xl border border-slate-200 bg-mist px-4 py-3 text-sm text-slate-600",3,"formGroup","ngSubmit",4,"ngIf"],[1,"mt-4","space-y-3","rounded-2xl","border","border-slate-200","bg-mist","px-4","py-3","text-sm","text-slate-600",3,"ngSubmit","formGroup"],[1,"space-y-1"],[1,"text-xs","font-medium","text-midnight",3,"for"],["type","text","formControlName","name",1,"w-full","rounded-xl","border","border-slate-200","bg-white","px-3","py-2","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20",3,"id"],["type","number","min","0","step","0.01","formControlName","availableBalance",1,"w-full","rounded-xl","border","border-slate-200","bg-white","px-3","py-2","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20",3,"id"],[1,"flex","items-center","gap-2"],["type","submit",1,"inline-flex","flex-1","items-center","justify-center","rounded-full","bg-midnight","px-4","py-2","text-sm","font-medium","text-white","transition","hover:bg-slate-900","disabled:opacity-70",3,"disabled"],[4,"ngIf","ngIfElse"],["type","button",1,"inline-flex","flex-1","items-center","justify-center","rounded-full","border","border-slate-200","px-4","py-2","text-sm","font-medium","text-slate-600","transition","hover:border-slate-400",3,"click"],[1,"inline-flex","items-center","gap-2"],[1,"h-2","w-2","animate-ping","rounded-full","bg-white"]],template:function(e,l){e&1&&(i(0,"section",1)(1,"div",2)(2,"div",3)(3,"header",4)(4,"h1",5),r(5,"Accounts centre"),n(),i(6,"p",6),r(7," Explore balances, available cash, and last updated timestamps. The data streams from the mock API so you can swap in live services later. "),n(),u(8,me,2,1,"p",7)(9,pe,2,1,"p",8)(10,ue,10,5,"div",9),p(11,"async"),n(),u(12,ve,2,1,"div",10),p(13,"async"),i(14,"div",11),r(15," Bring this section to life with account details, statements, downloadable exports, or quick actions like card freeze toggles. "),n()()()()),e&2&&(o(8),c("ngIf",l.saveSuccess()),o(),c("ngIf",l.saveError()),o(),c("ngIf",B(11,4,l.totals$)),o(2),c("ngIf",B(13,6,l.accounts$)))},dependencies:[L,H,X,te,Y,ie,Z,ee,ae,ne,re,J,Q,K],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var _e=[{path:"",component:I}],w=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=v({imports:[D.forChild(_e),D]})};var de=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=v({imports:[W,w,le]})};export{de as AccountsModule};
