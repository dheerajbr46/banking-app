import{b as te,c as f,d as ne,e as ie,f as oe,g as re,h as ae,i as le,j as me,k as se,l as de,m as ce,n as pe,o as ue}from"./chunk-7T5PGW3B.js";import{a as F}from"./chunk-CNJIAFHZ.js";import{a as fe}from"./chunk-TAB4Y5YQ.js";import{s as A}from"./chunk-O2OYFZXD.js";import{A as D,Ab as K,Bb as r,Cb as I,Db as p,Eb as w,J as R,Jb as u,Kb as _,Lb as T,Nb as H,P as V,R as B,S as O,Ua as l,Z as h,ab as g,ca as y,cc as J,fb as s,ga as j,ha as v,ib as m,lb as i,mb as t,nb as S,o as $,ob as L,pa as P,pb as z,qa as q,qb as U,rb as W,rc as Q,s as k,sb as c,sc as X,t as M,tc as Y,ua as G,xc as Z,yc as ee}from"./chunk-DEEXOUVC.js";function ve(n,o){if(n&1&&(i(0,"option",33),r(1),t()),n&2){let e=o.$implicit;m("value",e.id),l(),w(" ",e.name," \xB7 ",e.accountNumber," ")}}function Se(n,o){if(n&1&&(i(0,"option",33),r(1),t()),n&2){let e=o.$implicit;m("value",e.id),l(),w(" ",e.name," \xB7 ",e.accountNumber," ")}}function _e(n,o){n&1&&(L(0),r(1,"Schedule transfer"),z())}function Ee(n,o){if(n&1&&(i(0,"p",34),r(1),t()),n&2){let e=c();l(),p(" ",e.confirmation()," ")}}function Ce(n,o){if(n&1&&(i(0,"p",35),r(1),t()),n&2){let e=c();l(),p(" ",e.submitError()," ")}}function Ie(n,o){n&1&&(i(0,"span",36),S(1,"span",37),r(2," Processing\u2026 "),t())}function we(n,o){if(n&1&&(i(0,"p",43),r(1),u(2,"currency"),t()),n&2){let e=c().ngIf;l(),p(" Balance: ",T(2,1,e.from.balance,e.from.currency)," ")}}function Te(n,o){if(n&1&&(i(0,"p",43),r(1),u(2,"currency"),t()),n&2){let e=c().ngIf;l(),p(" Available: ",T(2,1,e.to.availableBalance,e.to.currency)," ")}}function Ae(n,o){if(n&1&&(i(0,"div",38)(1,"div",39)(2,"p",40),r(3,"From"),t(),i(4,"p",41),r(5),t(),s(6,we,3,4,"p",42),t(),i(7,"div",39)(8,"p",40),r(9,"To"),t(),i(10,"p",41),r(11),t(),s(12,Te,3,4,"p",42),t(),i(13,"div",39)(14,"p",40),r(15,"Estimated arrival"),t(),i(16,"p",41),r(17),t()()()),n&2){let e=o.ngIf,a=c();l(5),I((e.from==null?null:e.from.name)||"Select an account"),l(),m("ngIf",e.from),l(5),I((e.to==null?null:e.to.name)||"Choose a destination"),l(),m("ngIf",e.to),l(5),p(" ",a.transferForm.controls.schedule.value==="once"?"Same day (mock)":"2 business days (mock)"," ")}}var E=class n{fb=y(pe);bankData=y(fe);destroyRef=y(G);refreshTrigger$=D($(void 0),this.bankData.refresh$);accounts$=this.refreshTrigger$.pipe(O(()=>this.bankData.getAccounts()),V({bufferSize:1,refCount:!0}));accountsSnapshot=g([]);transferForm=this.fb.nonNullable.group({fromAccountId:["",f.required],toAccountId:["",f.required],amount:[250,[f.required,f.min(1)]],memo:["Monthly savings automation"],schedule:["once",f.required]});confirmation=g(null);submitError=g(null);isSubmitting=g(!1);selectedAccounts$=M([this.accounts$,this.transferForm.valueChanges.pipe(B(this.transferForm.getRawValue()))]).pipe(k(([o,e])=>({from:o.find(a=>a.id===e.fromAccountId)??null,to:o.find(a=>a.id===e.toAccountId)??null})));isValidTransfer=J(()=>this.transferForm.valid);constructor(){this.accounts$.pipe(F(this.destroyRef)).subscribe(o=>{this.accountsSnapshot.set(o),!this.transferForm.controls.fromAccountId.value&&o.length>0&&this.transferForm.patchValue({fromAccountId:o[0].id}),!this.transferForm.controls.toAccountId.value&&o.length>1&&this.transferForm.patchValue({toAccountId:o[1].id})})}submit(){if(!this.transferForm.valid){this.transferForm.markAllAsTouched();return}let{fromAccountId:o,toAccountId:e,amount:a,memo:x,schedule:b}=this.transferForm.getRawValue();this.isSubmitting.set(!0),this.submitError.set(null),this.confirmation.set(null);let N=this.accountsSnapshot(),be=N.find(d=>d.id===o),he=N.find(d=>d.id===e);this.bankData.createTransfer({fromAccountId:o,toAccountId:e,amount:a,memo:x||void 0,schedule:b}).pipe(F(this.destroyRef),R(()=>this.isSubmitting.set(!1))).subscribe({next:d=>{this.confirmation.set(`Scheduled ${b} transfer of $${a.toFixed(2)} from ${be?.name??o} to ${he?.name??e}. Reference: ${d.transferId}.`),this.transferForm.reset({fromAccountId:o,toAccountId:e,amount:a,memo:"",schedule:b})},error:d=>{let ye=d instanceof Error?d.message:"Unable to complete transfer.";this.submitError.set(ye)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=j({type:n,selectors:[["app-transfer"]],decls:57,vars:15,consts:[["submittingLabel",""],[1,"bg-white"],[1,"mx-auto","max-w-5xl","px-6","py-20"],[1,"rounded-3xl","border","border-slate-200","bg-white","p-10","shadow-sm"],[1,"text-3xl","font-semibold","text-midnight"],[1,"mt-4","text-slate-500"],[1,"mt-8","grid","gap-6","md:grid-cols-2"],[1,"space-y-6","rounded-2xl","border","border-slate-200","bg-mist","p-6","text-sm","text-slate-600",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","fromAccount",1,"text-sm","font-medium","text-midnight"],["id","fromAccount","formControlName","fromAccountId",1,"w-full","rounded-2xl","border","border-slate-200","bg-white","px-4","py-3","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","toAccount",1,"text-sm","font-medium","text-midnight"],["id","toAccount","formControlName","toAccountId",1,"w-full","rounded-2xl","border","border-slate-200","bg-white","px-4","py-3","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20"],[1,"grid","gap-4","md:grid-cols-2"],["for","amount",1,"text-sm","font-medium","text-midnight"],["id","amount","type","number","formControlName","amount","min","1","step","0.01",1,"w-full","rounded-2xl","border","border-slate-200","bg-white","px-4","py-3","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20"],["for","schedule",1,"text-sm","font-medium","text-midnight"],["id","schedule","formControlName","schedule",1,"w-full","rounded-2xl","border","border-slate-200","bg-white","px-4","py-3","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20"],["value","once"],["value","weekly"],["value","monthly"],["for","memo",1,"text-sm","font-medium","text-midnight"],["id","memo","type","text","formControlName","memo","placeholder","Describe this transfer",1,"w-full","rounded-2xl","border","border-slate-200","bg-white","px-4","py-3","text-sm","text-midnight","focus:border-midnight","focus:outline-none","focus:ring-2","focus:ring-midnight/20"],["type","submit",1,"inline-flex","w-full","items-center","justify-center","rounded-full","bg-midnight","px-6","py-3","text-sm","font-medium","text-white","transition","hover:bg-slate-900","disabled:cursor-not-allowed","disabled:opacity-70",3,"disabled"],[4,"ngIf","ngIfElse"],["class","rounded-2xl border border-emerald-100 bg-emerald-50 px-4 py-3 text-sm text-emerald-600",4,"ngIf"],["class","rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",4,"ngIf"],[1,"space-y-4","rounded-2xl","border","border-slate-200","bg-white","p-6","text-sm","text-slate-600"],[1,"text-lg","font-semibold","text-midnight"],["class","space-y-3",4,"ngIf"],[1,"rounded-2xl","border","border-dashed","border-slate-200","px-4","py-3","text-xs","text-slate-500"],[3,"value"],[1,"rounded-2xl","border","border-emerald-100","bg-emerald-50","px-4","py-3","text-sm","text-emerald-600"],[1,"rounded-2xl","border","border-rose-200","bg-rose-50","px-4","py-3","text-sm","text-rose-600"],[1,"inline-flex","items-center","gap-2"],[1,"h-2","w-2","animate-ping","rounded-full","bg-white"],[1,"space-y-3"],[1,"rounded-xl","border","border-slate-200","bg-mist","px-4","py-3"],[1,"text-xs","uppercase","tracking-wide","text-slate-400"],[1,"text-sm","font-medium","text-midnight"],["class","text-xs text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-500"]],template:function(e,a){if(e&1){let x=U();i(0,"section",1)(1,"div",2)(2,"div",3)(3,"h1",4),r(4,"Transfer funds"),t(),i(5,"p",5),r(6," Kick off mock transfers between accounts. The form is fully reactive\u2014swap the submit handler with a real API call when ready. "),t(),i(7,"div",6)(8,"form",7),W("ngSubmit",function(){return P(x),q(a.submit())}),i(9,"div",8)(10,"label",9),r(11,"From account"),t(),i(12,"select",10)(13,"option",11),r(14,"Select account"),t(),s(15,ve,2,3,"option",12),u(16,"async"),t()(),i(17,"div",8)(18,"label",13),r(19,"To account"),t(),i(20,"select",14)(21,"option",11),r(22,"Select destination"),t(),s(23,Se,2,3,"option",12),u(24,"async"),t()(),i(25,"div",15)(26,"div",8)(27,"label",16),r(28,"Amount"),t(),S(29,"input",17),t(),i(30,"div",8)(31,"label",18),r(32,"Frequency"),t(),i(33,"select",19)(34,"option",20),r(35,"Once"),t(),i(36,"option",21),r(37,"Weekly"),t(),i(38,"option",22),r(39,"Monthly"),t()()()(),i(40,"div",8)(41,"label",23),r(42,"Memo (optional)"),t(),S(43,"input",24),t(),i(44,"button",25),s(45,_e,2,0,"ng-container",26),t(),s(46,Ee,2,1,"p",27)(47,Ce,2,1,"p",28),t(),s(48,Ie,3,0,"ng-template",null,0,H),i(50,"aside",29)(51,"h2",30),r(52,"Transfer summary"),t(),s(53,Ae,18,5,"div",31),u(54,"async"),i(55,"div",32),r(56," Connect your animation library of choice here to celebrate successful transfers with micro interactions. "),t()()()()()()}if(e&2){let x=K(49);l(8),m("formGroup",a.transferForm),l(7),m("ngForOf",_(16,9,a.accounts$)),l(8),m("ngForOf",_(24,11,a.accounts$)),l(21),m("disabled",!a.isValidTransfer()||a.isSubmitting()),l(),m("ngIf",!a.isSubmitting())("ngIfElse",x),l(),m("ngIf",a.confirmation()),l(),m("ngIf",a.submitError()),l(6),m("ngIf",_(54,13,a.selectedAccounts$))}},dependencies:[Q,X,oe,se,de,te,re,me,ne,ie,ce,ae,le,Y,Z],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var Fe=[{path:"",component:E}],C=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=v({type:n});static \u0275inj=h({imports:[A.forChild(Fe),A]})};var ge=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=v({type:n});static \u0275inj=h({imports:[ee,ue,C]})};export{ge as TransferModule};
